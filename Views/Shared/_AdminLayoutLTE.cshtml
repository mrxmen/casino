@inject UserManager<AppUser> userManager
@inject RoleManager<IdentityRole> roleManager
@inject IAspNetRolesExtend repoRoleExtend

@{
    AppUser _CURRENT_USER = null;
    if (User.Identity.Name != null)
    {
        _CURRENT_USER = await userManager.FindByNameAsync(User.Identity.Name);
    }
    AspNetRolesExtend _CURRENT_ROLE = null;
    if (_CURRENT_USER != null)
    {
        IList<string> roleNames = await userManager.GetRolesAsync(_CURRENT_USER);
        if (roleNames.Count > 0)
        {
            IdentityRole rTemp = await roleManager.FindByNameAsync(roleNames.First());
            _CURRENT_ROLE = repoRoleExtend.RoleExtends.FirstOrDefault(r => r.RoleId == rTemp.Id);
        }
    }
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tài Xỉu BnS | My Game</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="/AdminLTE/bowers/bootstrap/css/bootstrap.min.css">
    <!-- jQuery UI base -->
    <link rel="stylesheet" href="/AdminLTE/bowers/jquery-ui/themes/redmonds/jquery-ui.min.css">
    <link rel="stylesheet" href="/AdminLTE/bowers/jquery-ui/themes/redmonds/jquery-ui.theme.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/AdminLTE/bowers/font-awesome/css/font-awesome.min.css" asp-append-version="true">
    <!-- Ionicons -->
    <link rel="stylesheet" href="/AdminLTE/bowers/Ionicons/css/ionicons.min.css" asp-append-version="true">
    <!-- Bootstrap Color Picker -->
    <link rel="stylesheet" href="/AdminLTE/bowers/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css">
    <!-- fullCalendar -->
    <link rel="stylesheet" href="/AdminLTE/bowers/fullcalendar/dist/fullcalendar.min.css" asp-append-version="true">
    <link rel="stylesheet" href="/AdminLTE/bowers/fullcalendar/dist/fullcalendar.print.min.css" asp-append-version="true" media="print">
    <!-- DataTables -->
    <link rel="stylesheet" href="/AdminLTE/bowers/datatables.net-bs/css/dataTables.bootstrap.min.css" asp-append-version="true">
    <!-- Theme style -->
    <link rel="stylesheet" href="/AdminLTE/dist/css/AdminLTE.min.css" asp-append-version="true">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="/AdminLTE/dist/css/skins/_all-skins.min.css">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="/AdminLTE/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" asp-append-version="true">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Google Font -->
    @*<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">*@
    @*<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Aldrich">*@

    <style>
                .input-validation-error {
                    border-color: red !important;
                    background-color: #fee !important;
                }

                #Password-error {
                    color: red !important;
                }

                .text-danger {
                    color: red !important;
                }

                .ui-dialog-titlebar-close {
                    display: none !important;
                }

                .ui-dialog .ui-dialog-buttonpane button {
                    padding: 5px 15px;
                    border: 1px solid #cecece;
                    background: #007dc1;
                    color: #fff;
                }

                .break_long_word {
                    -ms-word-break: break-all;
                    word-break: break-all;
                    /* Non standard for WebKit */
                    word-break: break-word;
                    -webkit-hyphens: auto;
                    -moz-hyphens: auto;
                    hyphens: auto;
                }
                /* UI - General */
                .color-palette {
                    height: 35px;
                    line-height: 35px;
                    text-align: center;
                }

                .color-palette-set {
                    margin-bottom: 15px;
                }

                .color-palette span {
                    display: none;
                    font-size: 12px;
                }

                .color-palette:hover span {
                    display: block;
                }

                .color-palette-box h4 {
                    position: absolute;
                    top: 100%;
                    left: 25px;
                    margin-top: -40px;
                    color: rgba(255, 255, 255, 0.8);
                    font-size: 12px;
                    display: block;
                    z-index: 7;
                }

                /* FROM HTTP://WWW.GETBOOTSTRAP.COM
                 * Glyphicons
                 *
                 * Special styles for displaying the icons and their classes in the docs.
                 */
                .bs-glyphicons {
                    padding-left: 0;
                    padding-bottom: 1px;
                    margin-bottom: 20px;
                    list-style: none;
                    overflow: hidden;
                }

                    .bs-glyphicons li {
                        float: left;
                        width: 25%;
                        height: 115px;
                        padding: 10px;
                        margin: 0 -1px -1px 0;
                        font-size: 12px;
                        line-height: 1.4;
                        text-align: center;
                        border: 1px solid #ddd;
                    }

                    .bs-glyphicons .glyphicon {
                        margin-top: 5px;
                        margin-bottom: 10px;
                        font-size: 24px;
                    }

                    .bs-glyphicons .glyphicon-class {
                        display: block;
                        text-align: center;
                        word-wrap: break-word; /* Help out IE10+ with class names */
                    }

                    .bs-glyphicons li:hover {
                        background-color: rgba(86, 61, 124, .1);
                    }

                @@media (min-width: 768px) {
                    .bs-glyphicons li {
                        width: 12.5%;
                    }
                }

                /* Modals */
                .example-modal .modal {
                    position: relative;
                    top: auto;
                    bottom: auto;
                    right: auto;
                    left: auto;
                    display: block;
                    z-index: 1;
                }

                .example-modal .modal {
                    background: transparent !important;
                }

        .cssDanhCuaTai {
            background: url('/User/img/Tai_Danh.png') #b92d2d no-repeat center top;
            -webkit-background-size: cover !important;
            -moz-background-size: cover !important;
            -o-background-size: cover !important;
            background-size: cover !important;
            /*background: #b92d2d !important;*/
            height: 138px;
        }

        .cssClockIndex {
            background: #525252;
            height: 138px;
        }

        .cssDanhCuaXiu {
            background: url('/User/img/Xiu_Danh.png') #871b1b no-repeat center top;
            -webkit-background-size: cover !important;
            -moz-background-size: cover !important;
            -o-background-size: cover !important;
            background-size: cover !important;
            /*background: #0085b4 !important;*/
            height: 138px;
        }

                .msg {
                    display: block;
                    overflow: scroll;
                    width: 100%;
                    line-height: 25px;
                    /*white-space: nowrap;*/
                    height: 500px;
                }

                @@media (max-width: 1366px) {
                    .timer {
                        font-size: 22px !important;
                    }
                }

        .timer {
            background: #efff24;
            width: 100%;
            height: 96px;
            line-height: 110px;
            text-align: center;
            font-size: 60px;
            font-family: 'Roboto', sans-serif;
            /*font-family: 'Aldrich', sans-serif;*/
            margin: 10px auto;
            border-radius: 36px;
            box-shadow: 0 0 10px #ef6712;
            color: #0000ee;
            vertical-align: middle;
        }

                #timer-beep {
                    position: absolute;
                    top: -100000em;
                }

                .noticeIndex {
                    line-height: 32px !important;
                }

                .cssChatIconVip {
                    margin-left: 24px;
                    margin-top: -60px;
                }

                .cssRealTimeTai {
                    background: #d32626;
                    padding: 2px;
                    color: #fff;
                    font-weight: 700;
                    border-radius: 20%;
                }

                .cssRealTimeXiu {
                    background: #1388dc;
                    padding: 2px;
                    color: #fff;
                    font-weight: 700;
                    border-radius: 20%;
                }

                .chatoff {
                    background: url(/icon/off.png)no-repeat;
                    cursor: pointer;
                }

                .marquee {
                    width: 100%;
                    overflow: hidden;
                    font-size: 20px !important;
                    font-weight: 700;
                    color: #0b1141;
                    margin-top: -10px;
                    margin-bottom: 10px;
                }

                .over123 {
                    background: rgba(47, 47, 47, 0.70);
                    float: right;
                    overflow: visible;
                    position: relative;
                    color: #FFFFFF;
                    z-index: 1000;
                    padding: 20px
                }

                    .over123 span {
                        position: relative;
                        top: 15px;
                    }

                .emoDiv {
                    float: left;
                    width: 55px;
                    text-align: center;
                }

                    .emoDiv a {
                        width: 60px;
                        color: #7F7F7F;
                        display: block;
                        background-color: #ffffff;
                        border: 3px solid #ffffff;
                        font-weight: bold;
                    }

                    .emoDiv .emoImg {
                        background-color: #F4EBD2;
                        display: block;
                        height: 45px;
                        width: 45px;
                    }

                    .emoDiv img {
                        max-width: 45px;
                        padding: 10px;
                    }

        .infoBoxEx {
            width: 120px !important;
            /*height: 72px;
            line-height: 72px;*/
            font-family: 'Roboto', sans-serif !important;
            font-size: 40px;
            text-align: right;
            padding-right: 5px;
            margin-right: 10px;
        }

        .infoWrapperXiu {
            width: 94%;
            margin-left: auto;
            margin-right: auto;
            min-height: 102px;
			color:#fff;
            background: #0085b4 !important;
        }

        .infoWrapperTai {
            width: 94%;
            margin-left: auto;
            margin-right: auto;
            min-height: 102px;
            color: #fff;
            background: #b92d2d !important;
        }

                /*
            RAINBOW TEXT
            Version 1.0 by tienit87
        */
        .rainbowV3 {
            background: red; /* For browsers that do not support gradients */
            background: -webkit-linear-gradient(left, orange, yellow, green, cyan, blue, violet); /* For Safari 5.1 to 6.0 */
            background: -o-linear-gradient(right, orange, yellow, green, cyan, blue, violet); /* For Opera 11.1 to 12.0 */
            background: -moz-linear-gradient(right, orange, yellow, green, cyan, blue, violet); /* For Firefox 3.6 to 15 */
            background: linear-gradient(to right, orange, yellow, green, cyan, blue, violet); /* Standard syntax (must be last) */
        }

                .rainbowV2 {
                    background-image: -webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #dc06dc), color-stop(0.3, #22f), color-stop(0.45, #1ac4c4), color-stop(0.6, #0fdb0f),color-stop(0.75, #2f2), color-stop(0.9, #ff8500), color-stop(1, #f22) );
                    background-image: gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #dc06dc), color-stop(0.3, #22f), color-stop(0.45, #1ac4c4), color-stop(0.6, #0fdb0f),color-stop(0.75, #2f2), color-stop(0.9, #ff8500), color-stop(1, #f22) );
                    color: transparent;
                    -webkit-background-clip: text;
                    background-clip: text;
                }

                .rainbow {
                    font-size: 18px;
                    font-weight: 700;
                    /* Chrome, Safari, Opera */
                    -webkit-animation: rainbow 1s infinite;
                    /* Internet Explorer */
                    -ms-animation: rainbow 1s infinite;
                    /* Standar Syntax */
                    animation: rainbow 1s infinite;
                }

                /* Chrome, Safari, Opera */
                @@-webkit-keyframes rainbow {
                    20% {
                        color: red;
                    }

                    40% {
                        color: yellow;
                    }

                    60% {
                        color: green;
                    }

                    80% {
                        color: blue;
                    }

                    100% {
                        color: orange;
                    }
                }
                /* Internet Explorer */
                @@-ms-keyframes rainbow {
                    20% {
                        color: red;
                    }

                    40% {
                        color: yellow;
                    }

                    60% {
                        color: green;
                    }

                    80% {
                        color: blue;
                    }

                    100% {
                        color: orange;
                    }
                }

                /* Standar Syntax */
                @@keyframes rainbow {
                    20% {
                        color: red;
                    }

                    40% {
                        color: yellow;
                    }

                    60% {
                        color: green;
                    }

                    80% {
                        color: blue;
                    }

                    100% {
                        color: orange;
                    }
                }
    </style>
</head>
<body class="hold-transition skin-green sidebar-mini">
    <div class="wrapper">
        <header class="main-header">
            <!-- Logo -->
            <a href="/AdminLTE" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><b>TX</b>B</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>Tài Xỉu</b> BnS</span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only">Toggle navigation</span>
                    <input type="hidden" id="abcxyz" name="abcxyz" />
                </a>

                @if (User.Identity.IsAuthenticated)
                {
                    <div class="navbar-custom-menu">
                        <ul class="nav navbar-nav">
                            <!-- User Account: style can be found in dropdown.less -->
                            <li class="dropdown user user-menu">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="overflow:hidden;">
                                    <img src="@_CURRENT_USER?.Avatar" class="user-image" alt="@_CURRENT_USER?.FullName">
                                    <span class="hidden-xs">@_CURRENT_USER?.FullName</span>
                                </a>
                                <ul class="dropdown-menu">
                                    <!-- User image -->
                                    <li class="user-header" style="height:212px !important;">
                                        <img src="@_CURRENT_USER?.Avatar" class="img-circle" alt="@_CURRENT_USER?.FullName">
                                        <p>
                                            <span style="color:#00ffff; font-size:14px;">
                                                @_CURRENT_USER?.InGame
                                            </span>
                                            <br />
                                            <span style="color:#fff; font-size:14px;">
                                                [@_CURRENT_USER?.GameServerName]
                                            </span>
                                            <div>
                                                <!-- foreach list role extend here -->
                                                <img id="userRoleExp" src="@_CURRENT_ROLE?.RoleImg" width="40" title="@_CURRENT_ROLE?.Remark" alt="@_CURRENT_ROLE?.Remark" />
                                            </div>
                                            <div style="height:5px !important; display:block;"></div>
                                        </p>
                                    </li>

                                    <!-- Menu Footer-->
                                    <li class="user-footer">
                                        <div class="pull-left">
                                            <a asp-action="UserProfile" class="btn btn-info btn-flat">Hồ sơ</a>
                                        </div>
                                        <div class="pull-right">
                                            <a asp-action="Logout" asp-controller="Account" class="btn btn-danger btn-flat">Đăng xuất</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                }
            </nav>
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                @if (User.Identity.IsAuthenticated)
                {
                    <!-- Sidebar user panel -->
                    <div class="user-panel">
                        <div class="pull-left image">
                            <img src="@_CURRENT_USER?.Avatar" class="img-circle" style="border:2px solid #484545;" alt="@_CURRENT_USER?.FullName">
                        </div>
                        <div class="pull-left info">
                            <p>@_CURRENT_USER?.InGame&nbsp;&nbsp;<i style="color:#00ff21;" class="fa fa-circle"></i></p>
                            <p style="color:#bebebe; font-size:11px; font-weight:400;">[@_CURRENT_USER?.GameServerName]</p>
                        </div>
                        <div style="float:right; margin-right:2px;">
                            <img id="userRoleExp" src="@_CURRENT_ROLE?.RoleImg" width="48" title="@_CURRENT_ROLE?.Remark" alt="@_CURRENT_ROLE?.Remark" />
                        </div>
                    </div>
                }
                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul id="ul_main" class="sidebar-menu" data-widget="tree">
                    @if (User.Identity.IsAuthenticated)
                    {
                        <li class="header">Thông tin Game</li>
                        <!-- Số gold -->
                        <li class="active">
                            <a asp-action="Index" asp-controller="AdminLTE">
                                <i class="fa fa-money text-yellow"></i>&nbsp;Số Gold: <span id="current_my_golds">@_CURRENT_USER?.MyGolds</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-bitcoin text-yellow pull-right"></i>
                                </span>
                            </a>
                        </li>
                        <!-- Lịch sử giao dịch -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-history text-lime"></i>&nbsp;<span>Lịch Sử Giao Dịch</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-green pull-right"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li class="active"><a asp-action="UserHistoryImportGold" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-green"></i>Lịch Sử Nạp Gold</a></li>
                                <li><a asp-action="UserHistoryExportGold" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-red"></i>Lịch Sử Rút Gold</a></li>
                                <li><a asp-action="UserHistoryPlayGold" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-yellow"></i>Lịch Sử Đặt Cược</a></li>
                                <li><a asp-action="UserHistoryWinGold" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-aqua"></i>Lịch Sử Win</a></li>
                            </ul>
                        </li>
                        <!-- Nạp/Rút Gold -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-retweet text-blue"></i>&nbsp;<span>Nạp Gold / Rút Gold</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-green pull-right"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li class="active"><a asp-action="UserImportGold" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-green"></i>Nạp Gold</a></li>
                                <li><a asp-action="UserExportGold" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-yellow"></i>Rút Gold</a></li>
                            </ul>
                        </li>


                        <li class="header">Thông tin cá nhân</li>
                        <!-- Hồ sơ -->
                        <li>
                            <a asp-action="UserProfile" asp-controller="AdminLTE">
                                <i class="fa fa-user-o text-aqua"></i>&nbsp;<span>Thông tin cá nhân</span>
                                <span class="pull-right-container">
                                    <small class="label pull-right bg-aqua-active">new</small>
                                </span>
                            </a>
                        </li>
                        <!-- Change Pass -->
                        <li>
                            <a asp-action="ChangePasswd" asp-controller="AdminLTE">
                                <i class="fa fa-key text-red"></i>&nbsp;<span>Thay đổi mật khẩu</span>
                                <span class="pull-right-container">
                                    <small class="label pull-right bg-red-active">new</small>
                                </span>
                            </a>
                        </li>
                    }

                    @if (User.IsInRole("SuperAdmins") || User.IsInRole("Admins") || User.IsInRole("Moderators") || User.IsInRole("Roller"))
                    {
                        <li class="header">Quản lý Game</li>
                        <!-- Roll Management -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-refresh text-yellow"></i>&nbsp;<span>Quản Lý Roll</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-yellow"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a asp-action="RollManager" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-light-blue"></i>Danh sách roll</a></li>
                                <li><a asp-action="RollingControl" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-purple"></i>Quản lý rolling</a></li>
                                <li><a asp-action="RollingDetail" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-green"></i>Chi tiết rolling</a></li>
                                <li><a asp-action="CreateRoll" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-red"></i>Tạo roll</a></li>
                            </ul>
                        </li>
                    }


                    @if (User.IsInRole("SuperAdmins") || User.IsInRole("Admins") || User.IsInRole("Moderators"))
                    {
                        <!-- Account Management -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-euro text-red"></i>&nbsp;<span>Quản Lý Tài Khoản</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-yellow"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a asp-action="SumFirstBalance" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-red"></i>Số dư đầu kỳ</a></li>
                                <li><a asp-action="SumAccountProfit" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-yellow"></i>Lợi nhuận</a></li>
                                <li><a asp-action="SumAccountGeneral" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-light-blue"></i>Ký gửi</a></li>
                                <li><a asp-action="SumServerGolds" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-green"></i>Server Gold</a></li>
                            </ul>
                        </li>
                        <!-- Users Management -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-users text-blue"></i>&nbsp;<span>Quản Lý Người Dùng</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-yellow pull-right"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a asp-action="CreateUser" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-red"></i>Lập nick chơi game</a></li>
                            </ul>
                        </li>
                        <!-- Requirement Management -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-archive text-green"></i>&nbsp;<span>Yêu Cầu</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left pull-right text-yellow"></i>
                                    <small id="notification_new_donate_req" class="label pull-right bg-red">0</small>
                                    <small id="notification_new_export_req" class="label pull-right bg-light-blue">0</small>
                                    <small id="notification_new_import_req" class="label pull-right bg-yellow">0</small>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a asp-action="ImportGoldManagement" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-yellow"></i>Yêu cầu nạp Gold&nbsp;&nbsp;&nbsp;<small id="no_import_req" class="label bg-yellow">0</small></a></li>
                                <li><a asp-action="ExportGoldManagement" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-light-blue"></i>Yêu cầu rút Gold&nbsp;&nbsp;&nbsp;<small id="no_export_req" class="label bg-light-blue">0</small></a></li>
                                <li><a asp-action="DonateManagement" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-red"></i>Yêu cầu Donate&nbsp;&nbsp;&nbsp;<small id="no_donate_req" class="label bg-red">0</small></a></li>
                            </ul>
                        </li>
                        <!-- Roll Detail Log -->
                        <li>
                            <a asp-action="RollTransactionLog" asp-controller="AdminLTE">
                                <i class="fa fa-history text-blue"></i>&nbsp;<span>Lịch Sử Vòng Roll</span>
                            </a>
                        </li>
                        <!-- Reset VIP -->
                        <li>
                            <a asp-action="ResetVipAccounts" asp-controller="AdminLTE">
                                <i class="fa fa-user-secret text-yellow"></i>&nbsp;<span>Reset Cấp Độ VIP</span>
                            </a>
                        </li>
                        <!-- Sync VIP -->
                        <li>
                            <a asp-action="SyncVipAccounts" asp-controller="AdminLTE">
                                <i class="fa fa-calculator text-blue"></i>&nbsp;<span>Đồng Bộ Cấp Độ VIP</span>
                            </a>
                        </li>
                    }

                    @if (User.IsInRole("SuperAdmins") || User.IsInRole("Admins"))
                    {
                        <li class="header">Quản trị hệ thống</li>
                        <!-- Import Gold by Admin -->
                        <li>
                            <a asp-action="ImportGoldByAdmin" asp-controller="AdminLTE">
                                <i class="fa fa-gbp text-aqua"></i>&nbsp;<span>Nạp Gold Cho Khách</span>
                            </a>
                        </li>
                        <!-- Import Gold (not save) -->
                        <li>
                            <a asp-action="ImportGoldByAdminNotInReq" asp-controller="AdminLTE">
                                <i class="fa fa-gbp text-yellow"></i>&nbsp;<span>Nạp Gold (Không Lưu)</span>
                            </a>
                        </li>
                        <!-- Export Gold (not save) -->
                        <li>
                            <a asp-action="ExportGoldByAdminNotInReq" asp-controller="AdminLTE">
                                <i class="fa fa-gbp text-red"></i>&nbsp;<span>Rút Gold (Không Lưu)</span>
                            </a>
                        </li>
                        <!-- Import / Export Guide -->
                        <li>
                            <a asp-action="ImExGuide" asp-controller="AdminLTE">
                                <i class="fa fa-info text-green"></i>&nbsp;<span>Hướng Dẫn Nạp/Rút Gold</span>
                            </a>
                        </li>
                        <!-- Marquee -->
                        <li>
                            <a asp-action="WebNofitication" asp-controller="AdminLTE">
                                <i class="fa fa-sticky-note text-light-blue"></i>&nbsp;<span>Thông Báo Wesite</span>
                            </a>
                        </li>
                        <!-- Thong tin chu y -->
                        <li>
                            <a asp-action="WebNote" asp-controller="AdminLTE">
                                <i class="fa fa-warning text-yellow"></i>&nbsp;<span>Thông Tin Chú Ý</span>
                            </a>
                        </li>
                        <!-- Stream URL Management -->
                        <li>
                            <a asp-action="SetStreamURL" asp-controller="AdminLTE">
                                <i class="fa fa-youtube-play text-red"></i>&nbsp;<span>Thiết Lập Stream URL</span>
                            </a>
                        </li>
                        <!-- User Management -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-users text-blue"></i>&nbsp;<span>Quản Lý Người Dùng</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-yellow pull-right"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a asp-action="UserManager" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-green"></i>Danh sách người dùng</a></li>
                                <li><a asp-action="CreateUser" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-yellow"></i>Tạo người dùng</a></li>
                            </ul>
                        </li>
                        <!-- Role Management -->
                        <li class="treeview">
                            <a href="#">
                                <i class="fa fa-universal-access text-green"></i>&nbsp;<span>Quản Lý Nhóm</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left text-yellow pull-right"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a asp-action="RolesManager" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-green"></i>Danh sách nhóm</a></li>
                                <li><a asp-action="CreateRole" asp-controller="AdminLTE">&nbsp;<i class="fa fa-circle-o text-red"></i>Tạo nhóm</a></li>
                            </ul>
                        </li>
                        <!-- Test Mode -->
                        <li>
                            <a asp-action="TestModeSetting" asp-controller="AdminLTE">
                                <i class="fa fa-desktop text-red"></i>&nbsp;<span>Chế Độ Test</span>
                            </a>
                        </li>
                        <!-- Register Mode -->
                        <li>
                            <a asp-action="RegisterModeSetting" asp-controller="AdminLTE">
                                <i class="fa fa-registered text-orange"></i>&nbsp;<span>Chế Độ Đăng Ký</span>
                            </a>
                        </li>
                    }


                    @if (User.Identity.IsAuthenticated)
                    {
                        <!-- Logout -->
                        <li>
                            <a asp-action="Logout" asp-controller="Account">
                                <i class="fa fa-power-off text-danger"></i>&nbsp;<span>Đăng Xuất</span>
                            </a>
                        </li>
                    }
                    else
                    {
                        <!-- Login -->
                        <li class="bg-green" style="margin-top:20px;">
                            <a asp-action="Login" asp-controller="Account">
                                <i class="fa fa-sign-in text-lime text-bold"></i>&nbsp;<span class="text-bold" style="color:#fff; font-size:16px;">Đăng Nhập</span>
                            </a>
                        </li>
                        <!-- Register -->
                        <li class="bg-blue" style="margin-top:20px;">
                            <a asp-action="Register" asp-controller="Account">
                                <i class="fa fa-user text-yellow text-bold"></i>&nbsp;<span class="text-bold" style="color:#fff; font-size:16px;">Đăng Ký</span>
                            </a>
                        </li>
                    }

                    <li class="header" style="line-height:32px; font-size:14px; font-weight:700; color:#cecece; margin-top:20px;">
                        <i class="fa fa-hand-o-right"></i>&nbsp;Bảng Xếp Hạng VIP
                    </li>
                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>
        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">

            @RenderBody()

        </div>
        <!-- /.content-wrapper -->
        <footer class="main-footer">
            <strong>Copyright &copy; 2017-2018 <a href="https://taixiubns.com">Tài Xỉu BnS</a>.</strong><strong> Version</strong> 2.1.103(x64). All rights reserved.
        </footer>
    </div>
    <!-- ./wrapper -->


    <div style="width: 378px;max-height: 470px;display: block;background-position: center 5px;background-repeat: no-repeat; background-color: #fff;-moz-background-clip: padding;-webkit-background-clip: padding-box;background-clip: padding-box;background-color: rgba(0, 0, 0, 0.5); position: fixed;right: 0px;bottom: 0px;color: #FFF;text-align: center;vertical-align: bottom;padding: 0 5px 10px; box-sizing: border-box; -webkit-box-sizing: border-box;-moz-box-sizing: border-box;border-radius: 3px;-webkit-border-radius: 3px; -moz-border-radius: 3px;overflow: hidden;z-index: 99999;">
        <div class="box box-danger collapsed-box" style="background:transparent !important; margin-bottom:-4px !important;">
            <div class="box-header" style="text-align:left; padding-bottom:0 !important;">
                <h3 class="box-title" style="font-size:16px; color:#fff;">Thắc Mắc + Mua Bán Gold (0985640039)</h3>

                <div class="box-tools pull-right" data-toggle="tooltip">
                    <div class="btn-group" data-toggle="btn-toggle">
                        <button type="button" data-widget="collapse" data-toggle="collapse" class="btn btn-sm bg-red-active">
                            <i class="fa fa-plus text-white"></i>
                        </button>
                    </div>
                </div>

            </div>
            <div id="box_chat_with_admin" class="box-body" style="height:145px; background:#fff !important; margin-top:14px;">
                <div style="color:#000; font-weight:700;">
                    <div style="width:30%; font-size:16px; display:inline-block; line-height:32px; vertical-align:top;">
                        <span class="text-green">Gấu Đại&nbsp;<i class="fa fa-check fa-2x"></i></span>
                    </div>
                    <div style="width:60%; text-align:left; font-size:14px; display:inline-block; line-height:32px; vertical-align:top;">
                        Thành Viên ib tại đây khi gặp bất kỳ vấn đề khi chơi
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- jQuery 3 -->
    <script src="/AdminLTE/bowers/jquery/dist/jquery.min.js" asp-append-version="true"></script>
    <!-- jQuery UI 1.11.4 -->
    @*<script src="/AdminLTE/bowers/jquery-ui/jquery-ui.min.js"></script>*@
    <script src="/AdminLTE/bowers/jquery-ui/jquery-ui.min.js" asp-append-version="true"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <!-- Bootstrap 3.3.7 -->
    <script src="/AdminLTE/bowers/bootstrap/dist/js/bootstrap.min.js" asp-append-version="true"></script>
    <!-- bootstrap color picker -->
    <script src="/AdminLTE/bowers/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
    <!-- DataTables -->
    <script src="/AdminLTE/bowers/datatables.net/js/jquery.dataTables.min.js" asp-append-version="true"></script>
    <script src="/AdminLTE/bowers/datatables.net-bs/js/dataTables.bootstrap.min.js" asp-append-version="true"></script>
    <!--Jquery Marquee-->
    <script src="/AdminLTE/bowers/jquery-marquee/jquery.marquee.min.js"></script>
    <!-- AdminLTE App -->
    <script src="/AdminLTE/dist/js/adminlte.min.js" asp-append-version="true"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="/AdminLTE/dist/js/pages/dashboard.js" asp-append-version="true"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="/AdminLTE/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <!-- Validate Client Side -->
    <script src="/AdminLTE/bowers/jquery-validation/dist/jquery.validate.min.js" asp-append-version="true"></script>
    <script src="/AdminLTE/bowers/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js" asp-append-version="true"></script>
    <script src="/js/jquery-ui.min.js" asp-append-version="true"></script>
    <script src="/js/signalr-client-1.0.0-alpha2-final.js"></script>
    <script src="/js/moment.js"></script>

    <script>
        // Validation Token for Request
        var tokenElements = document.getElementsByName("__RequestVerificationToken");
        var tokenKey = tokenElements[0].value;
        var ingame = '@_CURRENT_USER?.InGame';
        var userID = '@_CURRENT_USER?.Id';
        var userName = '@_CURRENT_USER?.UserName';
        var userAvatar = '@_CURRENT_USER?.Avatar.Replace("\\", "\\\\")';
        var userTitleColor = '@_CURRENT_USER?.TitleColor';
        var roleName = '@_CURRENT_ROLE?.RoleName';
        var roleImg = '@_CURRENT_ROLE?.RoleImg.Replace("\\", "\\\\")';
        var roleImgSmall = '@_CURRENT_ROLE?.RoleImgSmall.Replace("\\", "\\\\")';



        var transport = signalR.TransportType.WebSockets;
        var connection;
        if (location.protocol == 'https:') {
            connection = new signalR.HubConnection(`https://${document.location.host}/chat`, { transport: transport });
        }
        else if (location.protocol == 'http:') {
            connection = new signalR.HubConnection(`http://${document.location.host}/chat`, { transport: transport });
        }

        connection.on('getPreviousMsg', (data) => {
            $('#msgs').append(CompleteChat(data));
            $('.msg').scrollTop($('.msg').prop('scrollHeight'));
        });

        connection.on('broadcastMessage', (message) => {
            $('#msgs').append(message);
            $('.msg').scrollTop($('.msg').prop('scrollHeight'));
        });

        connection.on("updateUC", (_userCount) => {
            // update user online count
            $("#num_of_online_users").text(_userCount);
        });

        connection.on('updateTai', (alltai, persontai, rollid, createddate, trangold, tranname, uingame) => {
            //Index
            $("#sp_total_tai_rolling").text(alltai);
            $("#sp_total_user_tai_rolling").text(persontai);
            //RollingControl
            $("#sp_control_total_tai").text(alltai);
            //RollingDetail
            $("#sp_rolling_total_tai").text(alltai);
            //RollingDetail - Update list transactions
            var dthtml = "<tr><td>" + rollid + "</td>";
            dthtml = dthtml + "<td>" + createddate + "</td>";
            dthtml = dthtml + "<td>" + trangold + "</td>";
            dthtml = dthtml + "<td style='text-align:center;'><div class='cssRealTimeTai'>" + tranname + "</div></td>";
            dthtml = dthtml + "<td>" + uingame + "</td></tr>";
            $("#tblListOfRollDetail > tbody").html(dthtml + $("#tblListOfRollDetail > tbody").html());
        });

        connection.on('updateMyGoldTai', (mygoldtai) => {
            //Index
            $("#current_my_golds").text(mygoldtai);
            $("#myCurrentGoldTai").val(mygoldtai);
            $("#myCurrentGoldXiu").val(mygoldtai);
            $("#myCurrentGoldDonate").val(mygoldtai);
        });

        connection.on('updateXiu', (allxiu, personxiu, rollid, createddate, trangold, tranname, uingame) => {
            //Index
            $("#sp_total_xiu_rolling").text(allxiu);
            $("#sp_total_user_xiu_rolling").text(personxiu);
            //RollingControl
            $("#sp_control_total_xiu").text(allxiu);
            //RollingDetail
            $("#sp_rolling_total_xiu").text(allxiu);
            //RollingDetail - Update list transactions
            var dthtml = "<tr><td>" + rollid + "</td>";
            dthtml = dthtml + "<td>" + createddate + "</td>";
            dthtml = dthtml + "<td>" + trangold + "</td>";
            dthtml = dthtml + "<td style='text-align:center;'><div class='cssRealTimeXiu'>" + tranname + "</div></td>";
            dthtml = dthtml + "<td>" + uingame + "</td></tr>";
            $("#tblListOfRollDetail > tbody").html(dthtml + $("#tblListOfRollDetail > tbody").html());
        });

        connection.on('updateMyGoldXiu', (mygoldxiu) => {
            //Index
            $("#current_my_golds").text(mygoldxiu);
            $("#myCurrentGoldTai").val(mygoldxiu);
            $("#myCurrentGoldXiu").val(mygoldxiu);
            $("#myCurrentGoldDonate").val(mygoldxiu);
        });

        connection.on('updateWhenCK', (alltai, persontai, allxiu, personxiu) => {
            //Index
            $("#sp_total_tai_rolling").text(alltai);
            $("#sp_total_user_tai_rolling").text(persontai);
            $("#sp_total_xiu_rolling").text(allxiu);
            $("#sp_total_user_xiu_rolling").text(personxiu);
            $('#d_notification').html(''); //clear
            //RollingDetail
            $("#sp_rolling_total_tai").text(alltai);
            $("#sp_rolling_total_xiu").text(allxiu);
            //RollingControl
            $("#sp_control_total_tai").text(alltai);
            $("#sp_control_total_xiu").text(allxiu);
        });

        connection.on('updatePlay', (usertai, alltai, persontai, userxiu, allxiu, personxiu) => {
            //Index
            $("#sp_current_tai_rolling").text(usertai);
            $("#sp_total_tai_rolling").text(alltai);
            $("#sp_total_user_tai_rolling").text(persontai);
            $("#sp_current_xiu_rolling").text(userxiu);
            $("#sp_total_xiu_rolling").text(allxiu);
            $("#sp_total_user_xiu_rolling").text(personxiu);
            $('#d_notification').html(''); //clear
            //RollingDetail
            $("#sp_rolling_total_tai").text(alltai);
            $("#sp_rolling_total_xiu").text(allxiu);
            //RollingControl
            $("#sp_control_total_tai").text(alltai);
            $("#sp_control_total_xiu").text(allxiu);
            //Update rolled
            refreshRolled();
        });

        connection.on('notificationWhenCK', (usernameclient, msg, cmygolds, rollid, ntype) => {
            if (userName == usernameclient) {
                //Index - Common Notification
                var htmlNf = "";
                if (ntype == "return") {
                    htmlNf = "<div class='alert alert-warning alert-dismissible' style='margin-bottom:0;'>";
                }
                else if (ntype == "win") {
                    htmlNf = "<div class='alert alert-success alert-dismissible' style='margin-bottom:0;'>";
                }
                else if (ntype == "loss") {
                    htmlNf = "<div class='alert alert-info alert-dismissible' style='margin-bottom:0;'>";
                }
                htmlNf = htmlNf + "<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button>";
                htmlNf = htmlNf + "<span>" + usernameclient + ": " + msg + "</span></div>";
                $('#d_notification').append(htmlNf);
                //Index - MyGolds
                $("#current_my_golds").text(cmygolds);
                $("#myCurrentGoldTai").val(cmygolds);
                $("#myCurrentGoldXiu").val(cmygolds);
                $("#myCurrentGoldDonate").val(cmygolds);
            }
        });

        connection.on('updateRollStatus', (msg) => {
            $('#d2_roll_status').text(msg);
            if (msg == "Đang nhận") {
                $('#d2_roll_status_bg').css("background-color", "#00a400");
            }
            else {
                $('#d2_roll_status_bg').css("background-color", "#525252");
            }
        });

        connection.on('updateRollID', (rollid) => {
            $('#sp_rdetail_croll_id').text(rollid);
        });

        connection.on('displayDonateAll', (dou, dog, don) => {
            //Display on stream
            $('.over123').css('width', $('#this123 > iframe').width() + 'px');
            $('.over123').css('height', $('#this123 > iframe').height() + 'px');
            $('.over123').css('margin-top', - $('#this123 > iframe').height() + 'px');
            $('#div_dou').text(dou);
            $('#div_dog').text(dog);
            $('#div_don').text(don);
            $('.over123').show();
            setTimeout(function () { $('.over123').hide(); $('#div_dou').text(''); $('#div_don').text(''); }, 8000);
        });

        connection.on('updateReqIm', (cim) => {
            $("#notification_new_import_req").text(cim);
            $("#no_import_req").text(cim);
        });

        connection.on('updateReqEx', (cex, cmygolds) => {
            $("#notification_new_export_req").text(cex);
            $("#no_export_req").text(cex);
            //Index - MyGolds
            $("#current_my_golds").text(cmygolds);
            $("#myCurrentGoldTai").val(cmygolds);
            $("#myCurrentGoldXiu").val(cmygolds);
            $("#myCurrentGoldDonate").val(cmygolds);
        });

        connection.on('updateReqImEx', (cim, cex) => {
            $("#notification_new_import_req").text(cim);
            $("#no_import_req").text(cim);
            $("#notification_new_export_req").text(cex);
            $("#no_export_req").text(cex);
        });


        function CheckPlayTaiGold(objInput, objCurrent) {
            var cUserID = $("#userID").val();
            var txtInput = document.getElementById(objInput);
            var txtCurrent = document.getElementById(objCurrent);
            var valInput = parseInt(txtInput.value);
            var valCurrent = parseInt(txtCurrent.value);
            var inputStatus = document.getElementById("myStatusTai");
            if (inputStatus.value == null || inputStatus.value == "") {
                alert('Bạn chưa đăng nhập.');
                return false;
            }
            if (isNaN(valInput) || valInput == null || valInput == 0) {
                alert('Nhập số lượng để đánh.');
                return false;
            }
            if (valInput > valCurrent) {
                alert('Số dư trong tài khoản không đủ để đánh.');
                return false;
            }
            else {
                $(txtInput).val('');
                $("#tranTFinished").val('N');
                $("#taiTransactionGold").val(valInput);
                PlayTaiClient(cUserID, valInput);
            }
        }

        function CheckPlayXiuGold(objInput, objCurrent) {
            var cUserID = $("#userID").val();
            var txtInput = document.getElementById(objInput);
            var txtCurrent = document.getElementById(objCurrent);
            var valInput = parseInt(txtInput.value);
            var valCurrent = parseInt(txtCurrent.value);
            var inputStatus = document.getElementById("myStatusXiu");
            if (inputStatus.value == null || inputStatus.value == "") {
                alert('Bạn chưa đăng nhập.');
                return false;
            }
            if (isNaN(valInput) || valInput == null || valInput == 0) {
                alert('Nhập số lượng để đánh.');
                return false;
            }
            if (valInput > valCurrent) {
                alert('Số dư trong tài khoản không đủ để đánh.');
                return false;
            }
            else {
                $(txtInput).val('');
                $("#tranXFinished").val('N');
                $("#xiuTransactionGold").val(valInput);
                PlayXiuClient(cUserID, valInput);
            }
        }

        function CheckPlayDonate(objInput, objReason, objCurrent) {
            var txtInput = document.getElementById(objInput);
            var txtReason = document.getElementById(objReason);
            var txtCurrent = document.getElementById(objCurrent);
            var valInput = parseInt(txtInput.value);
            var valReason = txtReason.value;
            var valCurrent = parseInt(txtCurrent.value);
            var ckk = stripScripts(valReason);
            if (ckk) {
                txtReason.value = '';
                alert('BIẾN ĐI CON CHÓ (*^*)');
                return;
            }

            if (isNaN(valInput) || valInput == null || valInput == 0) {
                $('#dialogDonate').html('Nhập số lượng Gold để Donate.');
                $("#dialogDonate").attr({
                    title: "DONATE"
                });
                $('#dialogDonate').dialog({
                    autoOpen: true,
                    show: "blind",
                    hide: "explode",
                    modal: true,
                    open: function (event, ui) {
                        setTimeout(function () {
                            $('#dialogDonate').dialog('close');
                        }, 2000);
                    }
                });
                return false;
            }

            if (valReason == null || valReason == "") {
                $('#dialogDonate').html('Nhập ghi chú cho Donate.');
                $("#dialogDonate").attr({
                    title: "DONATE"
                });
                $('#dialogDonate').dialog({
                    autoOpen: true,
                    show: "blind",
                    hide: "explode",
                    modal: true,
                    open: function (event, ui) {
                        setTimeout(function () {
                            $('#dialogDonate').dialog('close');
                        }, 2000);
                    }
                });
                return false;
            }

            if (valInput < 50) {
                $('#dialogDonate').html('Số Gold Donate ít nhất phải từ 50.');
                $("#dialogDonate").attr({
                    title: "DONATE"
                });
                $('#dialogDonate').dialog({
                    autoOpen: true,
                    show: "blind",
                    hide: "explode",
                    modal: true,
                    open: function (event, ui) {
                        setTimeout(function () {
                            $('#dialogDonate').dialog('close');
                        }, 2000);
                    }
                });
                return false;
            }

            if (valInput > valCurrent) {
                $('#dialogDonate').html('Số dư trong tài khoản không đủ để Donate.');
                $("#dialogDonate").attr({
                    title: "DONATE"
                });
                $('#dialogDonate').dialog({
                    autoOpen: true,
                    show: "blind",
                    hide: "explode",
                    modal: true,
                    open: function (event, ui) {
                        setTimeout(function () {
                            $('#dialogDonate').dialog('close');
                        }, 2000);
                    }
                });
                return false;
            }
            else {
                // jQuery Dialog version
                $('#dcd_gold').text(valInput);
                $('#dcd_content').text(valReason);
                $("#dialog-confirm-donate").dialog({
                    resizable: false,
                    height: "auto",
                    width: 400,
                    modal: true,
                    buttons: {
                        "Đồng ý": function () {
                            //txtInput.value = 0;
                            PlayDonateClient(valInput, valReason);
                            $(this).dialog("close");
                        },
                        "Hủy bỏ": function () {
                            $('#dcd_gold').text('');
                            $('#dcd_content').text(valReason);
                            $(this).dialog("close");
                            return false;
                        }
                    }
                });
            }
        }

        function PlayTaiClient(valUserID, valPlayTai) {
            var tokenElements = document.getElementsByName("__RequestVerificationToken");
            var tokenKey = tokenElements[0].value;
            var PlayTaiData = { UserID: valUserID, TaiTransactionGold: valPlayTai };
            $.ajax({
                type: "POST",
                headers: {
                    "RequestVerificationToken": tokenKey
                },
                url: "/AdminLTE/ProcessingPlayTaiGoldV2",
                data: PlayTaiData,
                dataType: "json",
                success: function (data) {
                    if (data.returnType == "OK") {
                        $("#tranTFinished").val('Y');
                        $("#sp_current_tai_rolling").text(data.ctai);
                        //update Play, rolling detail
                        connection.invoke('sendtai', data.ttai, data.ptai, data.rollid, data.createddate, data.trangold, data.tranname, data.uingame);
                        //update current mygold
                        connection.invoke('sendtaimygold', data.cmygold);
                    }
                    else {
                        alert(data.returnMessage);
                    }
                },
                failure: function (data) {
                    //alert(JSON.stringify(data));
                },
                error: function (data) {
                    //alert(JSON.stringify(data));
                }
            });
        }

        function PlayXiuClient(valUserID, valPlayXiu) {
            var tokenElements = document.getElementsByName("__RequestVerificationToken");
            var tokenKey = tokenElements[0].value;
            var PlayXiuData = { UserID: valUserID, XiuTransactionGold: valPlayXiu };
            $.ajax({
                type: "POST",
                headers: {
                    "RequestVerificationToken": tokenKey
                },
                url: "/AdminLTE/ProcessingPlayXiuGoldV2",
                data: PlayXiuData,
                dataType: "json",
                success: function (data) {
                    if (data.returnType == "OK") {
                        $("#tranXFinished").val('Y');
                        $("#sp_current_xiu_rolling").text(data.cxiu);
                        //update Play, rolling detail
                        connection.invoke('sendxiu', data.txiu, data.pxiu, data.rollid, data.createddate, data.trangold, data.tranname, data.uingame);
                        //update current mygold
                        connection.invoke('sendxiumygold', data.cmygold);
                    }
                    else {
                        alert(data.returnMessage);
                    }
                },
                failure: function (data) {
                    //alert(JSON.stringify(data));
                },
                error: function (data) {
                    //alert(JSON.stringify(data));
                }
            });
        }

        function PlayDonateClient(valDonate, valReason) {
            var tokenElements = document.getElementsByName("__RequestVerificationToken");
            var tokenKey = tokenElements[0].value;
            var PlayDonateData = { InputGoldForDonate: valDonate, ReasonForDonate: valReason };
            $.ajax({
                type: "POST",
                headers: {
                    "RequestVerificationToken": tokenKey
                },
                url: "/AdminLTE/UserDonate",
                data: PlayDonateData,
                dataType: "json",
                success: function (data) {
                    //alert(JSON.stringify(data));

                    //$('#dialogDN').html(data.returnMessage);
                    //$("#dialogDN").attr({
                    //    title: "[DONATE] THÀNH CÔNG"
                    //});

                    //$('#dialogDN').dialog({
                    //    autoOpen: true,
                    //    show: "blind",
                    //    hide: "explode",
                    //    modal: true,
                    //    open: function (event, ui) {
                    //        setTimeout(function () {
                    //            $('#dialogDN').dialog('close');
                    //        }, 3000);
                    //    }
                    //});

                    // reset control
                    $('#inputGoldForDonate').val('');
                    $('#reasonForDonate').val('');

                    //display for all
                    if (data.returnType == "OK") {
                        connection.invoke('displaydonateforall', data.dou, data.dog, data.don);
                    }
                },
                failure: function (data) {
                    //alert(JSON.stringify(data));
                },
                error: function (data) {
                    //alert(JSON.stringify(data));
                }
            });
        }

        function CompleteChat(rawData) {
            rawData = replaceAll(rawData, "/banhbao01", "<img src='/User/emo/banhbao/banhbao01.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao02", "<img src='/User/emo/banhbao/banhbao02.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao03", "<img src='/User/emo/banhbao/banhbao03.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao04", "<img src='/User/emo/banhbao/banhbao04.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao05", "<img src='/User/emo/banhbao/banhbao05.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao06", "<img src='/User/emo/banhbao/banhbao06.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao07", "<img src='/User/emo/banhbao/banhbao07.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao08", "<img src='/User/emo/banhbao/banhbao08.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao09", "<img src='/User/emo/banhbao/banhbao09.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao10", "<img src='/User/emo/banhbao/banhbao10.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao11", "<img src='/User/emo/banhbao/banhbao11.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao12", "<img src='/User/emo/banhbao/banhbao12.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao13", "<img src='/User/emo/banhbao/banhbao13.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao14", "<img src='/User/emo/banhbao/banhbao14.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao15", "<img src='/User/emo/banhbao/banhbao15.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao16", "<img src='/User/emo/banhbao/banhbao16.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao17", "<img src='/User/emo/banhbao/banhbao17.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao18", "<img src='/User/emo/banhbao/banhbao18.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao19", "<img src='/User/emo/banhbao/banhbao19.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao20", "<img src='/User/emo/banhbao/banhbao20.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao21", "<img src='/User/emo/banhbao/banhbao21.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao22", "<img src='/User/emo/banhbao/banhbao22.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao23", "<img src='/User/emo/banhbao/banhbao23.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao24", "<img src='/User/emo/banhbao/banhbao24.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao25", "<img src='/User/emo/banhbao/banhbao25.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao26", "<img src='/User/emo/banhbao/banhbao26.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao27", "<img src='/User/emo/banhbao/banhbao27.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao28", "<img src='/User/emo/banhbao/banhbao28.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao29", "<img src='/User/emo/banhbao/banhbao29.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao30", "<img src='/User/emo/banhbao/banhbao30.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao31", "<img src='/User/emo/banhbao/banhbao31.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao32", "<img src='/User/emo/banhbao/banhbao32.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao33", "<img src='/User/emo/banhbao/banhbao33.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao34", "<img src='/User/emo/banhbao/banhbao34.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao35", "<img src='/User/emo/banhbao/banhbao35.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao36", "<img src='/User/emo/banhbao/banhbao36.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao37", "<img src='/User/emo/banhbao/banhbao37.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao38", "<img src='/User/emo/banhbao/banhbao38.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao39", "<img src='/User/emo/banhbao/banhbao39.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao40", "<img src='/User/emo/banhbao/banhbao40.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao41", "<img src='/User/emo/banhbao/banhbao41.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao42", "<img src='/User/emo/banhbao/banhbao42.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao43", "<img src='/User/emo/banhbao/banhbao43.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao44", "<img src='/User/emo/banhbao/banhbao44.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao45", "<img src='/User/emo/banhbao/banhbao45.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao46", "<img src='/User/emo/banhbao/banhbao46.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao47", "<img src='/User/emo/banhbao/banhbao47.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao48", "<img src='/User/emo/banhbao/banhbao48.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao49", "<img src='/User/emo/banhbao/banhbao49.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao50", "<img src='/User/emo/banhbao/banhbao50.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao51", "<img src='/User/emo/banhbao/banhbao51.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao52", "<img src='/User/emo/banhbao/banhbao52.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao53", "<img src='/User/emo/banhbao/banhbao53.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao54", "<img src='/User/emo/banhbao/banhbao54.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/banhbao55", "<img src='/User/emo/banhbao/banhbao55.gif' style='height:48px;' />");

            rawData = replaceAll(rawData, "/meocute01", "<img src='/User/emo/meocute/meocute01.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute02", "<img src='/User/emo/meocute/meocute02.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute03", "<img src='/User/emo/meocute/meocute03.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute04", "<img src='/User/emo/meocute/meocute04.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute05", "<img src='/User/emo/meocute/meocute05.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute06", "<img src='/User/emo/meocute/meocute06.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute07", "<img src='/User/emo/meocute/meocute07.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute08", "<img src='/User/emo/meocute/meocute08.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute09", "<img src='/User/emo/meocute/meocute09.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute10", "<img src='/User/emo/meocute/meocute10.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute11", "<img src='/User/emo/meocute/meocute11.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute12", "<img src='/User/emo/meocute/meocute12.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute13", "<img src='/User/emo/meocute/meocute13.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute14", "<img src='/User/emo/meocute/meocute14.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute15", "<img src='/User/emo/meocute/meocute15.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute16", "<img src='/User/emo/meocute/meocute16.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute17", "<img src='/User/emo/meocute/meocute17.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute18", "<img src='/User/emo/meocute/meocute18.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/meocute19", "<img src='/User/emo/meocute/meocute19.gif' style='height:48px;' />");

            rawData = replaceAll(rawData, "/panda01", "<img src='/User/emo/panda/panda01.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda02", "<img src='/User/emo/panda/panda02.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda03", "<img src='/User/emo/panda/panda03.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda04", "<img src='/User/emo/panda/panda04.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda05", "<img src='/User/emo/panda/panda05.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda06", "<img src='/User/emo/panda/panda06.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda07", "<img src='/User/emo/panda/panda07.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda08", "<img src='/User/emo/panda/panda08.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda09", "<img src='/User/emo/panda/panda09.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda10", "<img src='/User/emo/panda/panda10.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda11", "<img src='/User/emo/panda/panda11.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda12", "<img src='/User/emo/panda/panda12.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda13", "<img src='/User/emo/panda/panda13.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda14", "<img src='/User/emo/panda/panda14.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda15", "<img src='/User/emo/panda/panda15.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda16", "<img src='/User/emo/panda/panda16.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda17", "<img src='/User/emo/panda/panda17.gif' style='height:48px;' />");
            rawData = replaceAll(rawData, "/panda18", "<img src='/User/emo/panda/panda18.gif' style='height:48px;' />");
            return rawData;
        }

        function replaceAll(str, find, replace) {
            return str.replace(new RegExp(find, 'g'), replace);
        }



        function getMsgHTML() {
            var d = new Date();
            var sendDate = d.toLocaleTimeString().toLowerCase();
            sendDate = sendDate.substring(0, sendDate.lastIndexOf(":"));
            var message = $('#MessageField').val();
            var ckk = stripScripts(message);
            if (ckk) {
                message = "ĐÂY CHÍNH LÀ THẰNG PHÁ WEB <-- KILL NÓ";
            }
            var msgHTML = "<div class='item'>";
            msgHTML = msgHTML + "<img src='" + userAvatar + "'>";
            msgHTML = msgHTML + "<div class='cssChatIconVip'><img src='" + roleImgSmall + "' width='39' height='17'></div>"
            msgHTML = msgHTML + "<p class='message' style='margin-top: -14px;'>";
            msgHTML = msgHTML + "<a href='#' class='name'>";
            msgHTML = msgHTML + "<small class='text-muted pull-right'><i class='fa fa-clock-o'></i> " + sendDate + "</small>";
            if (roleName == 'SuperAdmins') {
                msgHTML = msgHTML + "<span class='rainbow'>" + ingame + "</span></a>";
            }
            else if (roleName == 'Admins' || roleName == 'Moderators') {
                msgHTML = msgHTML + "<span class='rainbowV2'>" + ingame + "</span></a>";
            }
            else {
                msgHTML = msgHTML + "<span style='color:" + userTitleColor + ";'>" + ingame + "</span></a>";
            }
            msgHTML = msgHTML + CompleteChat(message) + "</p></div>";
            return msgHTML;
        }

        function AddMessage(msg, uid, igame, usname, uavatar, utitlecolor, rname, ravatar, rsmallimg, pip, mac) {
            var ChatData = { Message: msg, Chatuserid: uid, Chatingame: igame, Chatusername: usname, Chatavatar: uavatar, Chattitlecolor: utitlecolor, Rname: rname, Ravatar: ravatar, RavatarSmall: rsmallimg, Publicip: pip, Macaddress: mac };
            if (ChatData.Message != null && ChatData.Message != "") {
                $.ajax({
                    type: "POST",
                    headers: {
                        "RequestVerificationToken": tokenKey
                    },
                    url: "/AdminLTE/SendMessage",
                    data: ChatData,
                    dataType: "json",
                    success: function (data) {
                        //alert(JSON.stringify(data));
                    },
                    failure: function (data) {
                        //alert(JSON.stringify(data));
                    },
                    error: function (data) {
                        //alert(JSON.stringify(data));
                    }
                });
            }
        }

        $('#btnSendMessage').on('click', function (e) {
            if ($('#MessageField').val().trim() == '') {
                return;
            }
            connection.invoke('send', getMsgHTML());
            //AddMessage
            var ckk = stripScripts($('#MessageField').val());
            var pippps = $('#abcxyz').val();
            if (ckk) {
                var kill_it = "ĐÂY CHÍNH LÀ THẰNG PHÁ WEB <-- KILL NÓ";
                AddMessage(kill_it, userID, ingame, userName, userAvatar, userTitleColor, roleName, roleImg, roleImgSmall, pippps, "");
            }
            else {
                var reck = $('#MessageField').val().replace('script', '');
                AddMessage(reck, userID, ingame, userName, userAvatar, userTitleColor, roleName, roleImg, roleImgSmall, pippps, "");
            }
            $('#MessageField').val('');
            $('.msg').scrollTop($('.msg').prop('scrollHeight'));
            $('#MessageField').focus();

            e.preventDefault();
        });

        $('#MessageField').keypress(function (e) {
            if (e.which != 13) {
                return;
            }

            e.preventDefault();

            if ($('#MessageField').val().trim() == '') {
                return;
            }
            connection.invoke('send', getMsgHTML());
            //AddMessage
            var ckk = stripScripts($('#MessageField').val());
            var pippps = $('#abcxyz').val();
            if (ckk) {
                var kill_it = "ĐÂY CHÍNH LÀ THẰNG PHÁ WEB <-- KILL NÓ";
                AddMessage(kill_it, userID, ingame, userName, userAvatar, userTitleColor, roleName, roleImg, roleImgSmall, pippps, "");
            }
            else {
                var reck = $('#MessageField').val().replace('script', '');
                AddMessage(reck, userID, ingame, userName, userAvatar, userTitleColor, roleName, roleImg, roleImgSmall, pippps, "");
            }
            $('#MessageField').val('');
            $('.msg').scrollTop($('.msg').prop('scrollHeight'));
            $('#MessageField').focus();
        });

        connection.start();
    </script>

    <script>
        function GetPublicIP() {
            //$.ajax({
            //    type: "GET",
            //    //url: "/AdminLTE/GetPublicIP",
            //    url: "http://jsonip.com",
            //    contentType: "application/json; charset=utf-8",
            //    dataType: "json",
            //    success: function (data) {
            //        alert(JSON.stringify(data));
            //        //alert(data.ip);
            //        //$('#abcxyz').val(data.pip);
            //    },
            //    failure: function (data) {
            //        alert(JSON.stringify(data));
            //    },
            //    error: function (data) {
            //        alert(JSON.stringify(data));
            //    }
            //});

            /*//freegeoip.net/json/?callback=?*/
            /*//jsonip.com/*/
            $.getJSON('//jsonip.com/', function (data) {
                //alert(JSON.stringify(data.ip));
                $('#abcxyz').val(data.ip);
            });
        }

        function GetMAC() {
            //This function requires following option to be enabled without prompting
            //In Internet Options for IE 5.5 and up
            //Tab Security (Local Internet Sites)
            //Custom Level button
            //"Initialize and script ActiveX control not marked as safe." option enabled
            try {
                var locator = new ActiveXObject("WbemScripting.SWbemLocator");
                var service = locator.ConnectServer(".");

                //Get properties of the network devices with an active IP address
                var properties = service.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration" +
                    " WHERE IPEnabled=TRUE");

                var e = new Enumerator(properties);

                //Take first item from the list and return MACAddress
                var p = e.item(0);
            }
            catch (exception) {
                alert('Add your domain to Trusted Sites.');
                window.location = "about:blank";
            }

            //return p.MACAddress;
            alert(p.MACAddress);
        }

        function GetRanks() {
            $.ajax({
                type: "GET",
                url: "/AdminLTE/GetRanks2",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    //alert(JSON.stringify(data));
                    $('li.ranking').remove();
                    $('ul#ul_main').append(data.gdatas);
                },
                failure: function (data) {
                    //alert(JSON.stringify(data));
                },
                error: function (data) {
                    //alert(JSON.stringify(data));
                }
            });
        }

        function stripScripts(s) {
            return s.includes("script");
        }

        $(function () {
            GetPublicIP();

            //GetMAC();

            //update status rolling
            if ($('#d2_roll_status').text() == "Đang nhận") {
                $('#d2_roll_status_bg').css("background-color", "#00a400 !important");
            }
            else {
                $('#d2_roll_status_bg').css("background-color", "#525252 !important");
            }

            setTimeout(function () {
            ////update Roll_Status Background
            //if ($('#d2_roll_status').text() == "Đang nhận") {
            //    $('#d2_roll_status_bg').css("background-color", "#00a400 !important");
            //}
            //else {
            //    $('#d2_roll_status_bg').css("background-color", "#525252 !important");
            //}
            GetRanks();
            }, 2000); //2s
        });

        function InitReqNotify() {
            $.ajax({
                type: "GET",
                url: "/AdminLTE/InitReqNotify",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    connection.invoke('initreqnotify', data.cim, data.cex);
                },
                failure: function (data) {
                    //alert(JSON.stringify(data));
                },
                error: function (data) {
                    //alert(JSON.stringify(data));
                }
            });
        }

        $(function () {
            setTimeout(function () {
                InitReqNotify();
            }, 3000); //3s
        });
    </script>

    @*<script>
            $(function () {

                $('.textarea').wysihtml5()

                CKEDITOR.replace('ckeditorcontent')
            });
        </script>*@


    <!-- Notification & Chat -->
    @*<script>
            (function GetNewRequirements() {
                $.ajax({
                    type: "GET",
                    url: "/AdminLTE/GetNewRequirements",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        //alert(JSON.stringify(data));
                        // new requirement
                        $("#notification_new_import_req").text(data.reqIm);
                        $("#no_import_req").text(data.reqIm);
                        $("#notification_new_export_req").text(data.reqEx);
                        $("#no_export_req").text(data.reqEx);
                        $("#notification_new_donate_req").text(data.reqDn);
                        $("#no_donate_req").text(data.reqDn);
                        // current golds
                        $("#current_my_golds").text(data.myGolds);
                        $("#myCurrentGoldTai").val(data.myGolds.replace(",", ""));
                        $("#myCurrentGoldXiu").val(data.myGolds.replace(",", ""));
                        $("#myCurrentGoldDonate").val(data.myGolds.replace(",", ""));
                        // current role
                        $("#userRoleExp").attr("src", data.roleImg);
                        $('#userRoleExp').attr("title", data.roleDesc);
                        $('#userRoleExp').attr("alt", data.roleDesc);
                        //donate
                        if (data.dos == 6) {
                            $('.over123').css('width', $('#this123 > iframe').width() + 'px');
                            $('.over123').css('height', $('#this123 > iframe').height() + 'px');
                            $('.over123').css('margin-top', - $('#this123 > iframe').height() + 'px');
                            $('#div_dou').text(data.dou);
                            $('#div_dog').text(data.dog);
                            $('#div_don').text(data.don);
                            $('.over123').show();
                            setTimeout(function () { $('.over123').hide(); $('#div_dou').text(''); $('#div_don').text(''); }, 8000);

                            //var msg = new SpeechSynthesisUtterance();
                            //var voices = window.speechSynthesis.getVoices();
                            //msg.text = 'Thank you';
                            //msg.lang = 'en-US';
                            //window.speechSynthesis.speak(msg);
                        }

                        setTimeout(GetNewRequirements, 2000);
                    },
                    failure: function (data) {
                        //alert(JSON.stringify(data));
                    },
                    error: function (data) {
                        //alert(JSON.stringify(data));
                    }
                });
            }());
        </script>*@
    <!-- Script for Autocomplete -->
    <script>
        $(function () {
            var availableTags = [
                "10",
                "50",
                "100",
                "200",
                "500",
                "1000",
                "2000",
                "5000",
                "10000",
            ];
            $("#tempTAI").autocomplete({
                source: availableTags
            });
            $("#tempXIU").autocomplete({
                source: availableTags
            });

            $("#tempTAI").keypress(function () {
                $('#tempXIU').val('');
            });

            $("#tempXIU").keypress(function () {
                $('#tempTAI').val('');
            });
        });
    </script>
    <!-- Data Table -->
    <script>
        $(function () {
            $('#tblListOfProducts').DataTable()

            $('#tblListOfUsers').DataTable()

            $('#tblListOfRoles').DataTable()

            $('#tblListOfImportGoldManagement').DataTable()

            $('#tblListOfExportGoldManagement').DataTable()

            $('#tblListOfDonateManagement').DataTable()

            $('#tblListOfRolls').DataTable()

            $('#tblListOfSumProfits').DataTable()

            $('#tblListOfNapGold').DataTable()

            $('#tblListOfRutGold').DataTable()

            $('#tblListOfDetailProfit').DataTable()

            $('#tblListOfProfitByDay').DataTable()

            $('#tblListOfLogTransaction').DataTable()

            $('#tblListOfRollDetail').DataTable({
                'paging': false,
                'lengthChange': false,
                'searching': false,
                'ordering': false,
                'info': false,
                'autowidth': false
            })

            $('#tblListUsersForAdd').DataTable({
                'paging': false,
                'lengthChange': false,
                'searching': true,
                'ordering': true,
                'info': true,
                'autowidth': false
            })

            $('#tblListUsersForRemove').DataTable({
                'paging': false,
                'lengthChange': false,
                'searching': true,
                'ordering': true,
                'info': true,
                'autowidth': false
            })
        })
    </script>
    <!-- Script for Delete User & Role Confirmation -->
    <script>
        function myFunction(element) {
            var eid = element.id;
            var arr = eid.split("_");
            document.getElementById(arr[1]).submit();
        }
    </script>


    @RenderSection("Scripts_AdminLTE_Index", required: false)

    @RenderSection("Scripts_UserProfile", required: false)

    @RenderSection("Scripts_AdminLTE_UserImportGold", required: false)

    @RenderSection("Scripts_AdminLTE_UserExportGold", required: false)

    @RenderSection("Scripts_AdminLTE_RollingDetail", required: false)


    <!-- Global site tag (gtag.js) - Google Analytics -->
    @*<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113633453-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());

            gtag('config', 'UA-113633453-1');
        </script>*@

</body>
</html>
